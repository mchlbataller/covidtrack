_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{"+Et7":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var r=n("vJKn"),a=n.n(r),i=n("cpVT"),c=n("rg98"),o=n("nKUr"),s=n("r9w1"),u=n("Z3vd"),l=n("m6V+"),d=n("KYPV"),b=n("8yiW"),p=(n("19BS"),n("UGp+"));function h(e){var t=e.handleSubmit,n=e.newsData,r=e.handleEdit,a=e.handleDelete,i=Object(d.c)({initialValues:{author:"",headline:"",content:"",preview:""},onSubmit:t,validationSchema:p.a().shape({author:p.b().required("Author is required"),headline:p.b().required("Headline is required"),content:p.b().required("Content is required")})});return Object(o.jsxs)(l.a,{title:"News",children:[Object(o.jsx)("form",{onSubmit:i.handleSubmit,className:"mb-5",children:Object(o.jsxs)("div",{className:"flex flex-col",children:[Object.keys(i.values).filter((function(e){return"preview"!==e})).map((function(e,t){return Object(o.jsx)(s.a,{variant:"filled",label:e,error:i.errors[e],helperText:i.errors[e],name:e,onChange:i.handleChange,className:"capitalize mb-3 ".concat("content"!==e?"w-1/3":"w-1/2"),multiline:"content"===e},t)})),Object(o.jsx)(u.a,{type:"submit",variant:"contained",color:"primary",className:"w-1/4",children:"Submit"})]})}),Object(o.jsx)("section",{children:n&&Object(o.jsx)(b.a,{title:"News",itemsList:n,keys:["author","headline"],handleEdit:r,handleDelete:a})})]})}var j=n("vDqi"),w=n.n(j),f=n("VtrM");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(){var e=Object(f.a)("/api/news",(function(e){return w.a.get(e).then((function(e){return e.data.data}))})),t=e.data;return e.error?Object(o.jsx)(l.a,{children:"An error has occurred. Please contact your system administrator."}):t?Object(o.jsx)(h,{newsData:t,handleEdit:function(e,t){w.a.patch("/api/news",{newData:e}),Object(f.b)("/api/news")},handleDelete:function(e,t){w.a.delete("/api/news",{params:{id:t._id}}),Object(f.b)("/api/news")},handleSubmit:function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preview=t.content.slice(0,80)+"...",e.next=3,w.a.post("/api/news",m({},t)).then((function(e){return n.resetForm({values:{author:"",headline:"",content:"",preview:""}})})).catch((function(e){return console.error(e)}));case 3:Object(f.b)("/api/news");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}):Object(o.jsx)(l.a,{children:"Loading..."})}},e852:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/news",function(){return n("+Et7")}])}},[["e852",0,2,1,3,4,5,6,7,8,11,10,13,14]]]);