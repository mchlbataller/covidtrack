_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[29],{"29ws":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/news/[id]",function(){return r("xuzr")}])},rg98:function(e,t,r){"use strict";function n(e,t,r,n,a,c,s){try{var i=e[c](s),o=i.value}catch(u){return void r(u)}i.done?t(o):Promise.resolve(o).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,c){var s=e.apply(t,r);function i(e){n(s,a,c,i,o,"next",e)}function o(e){n(s,a,c,i,o,"throw",e)}i(void 0)}))}}r.d(t,"a",(function(){return a}))},xuzr:function(e,t,r){"use strict";r.r(t),r.d(t,"__N_SSP",(function(){return I})),r.d(t,"default",(function(){return R}));var n=r("nKUr"),a=r("xvhg"),c=r("ofer"),s=r("wb2y"),i=r("cpVT"),o=r("vJKn"),u=r.n(o),l=r("rg98"),d=r("wx14"),m=r("Ff2n"),b=r("q1tI"),p=(r("17x9"),r("iuhU")),f=r("H2TA"),j=r("5AJ6"),h=Object(j.a)(b.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var O=b.forwardRef((function(e,t){var r=e.alt,n=e.children,a=e.classes,c=e.className,s=e.component,i=void 0===s?"div":s,o=e.imgProps,u=e.sizes,l=e.src,f=e.srcSet,j=e.variant,O=void 0===j?"circle":j,v=Object(m.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),x=null,g=function(e){var t=e.src,r=e.srcSet,n=b.useState(!1),a=n[0],c=n[1];return b.useEffect((function(){if(t||r){c(!1);var e=!0,n=new Image;return n.src=t,n.srcSet=r,n.onload=function(){e&&c("loaded")},n.onerror=function(){e&&c("error")},function(){e=!1}}}),[t,r]),a}({src:l,srcSet:f}),w=l||f,y=w&&"error"!==g;return x=y?b.createElement("img",Object(d.a)({alt:r,src:l,srcSet:f,sizes:u,className:a.img},o)):null!=n?n:w&&r?r[0]:b.createElement(h,{className:a.fallback}),b.createElement(i,Object(d.a)({className:Object(p.a)(a.root,a.system,a[O],c,!y&&a.colorDefault),ref:t},v),x)})),v=Object(f.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(O),x=r("Z3vd"),g=r("r9w1"),w=r("vDqi"),y=r.n(w),N=r("KYPV"),S=r("ExVU"),E=r("20a2"),P=r("VtrM");function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=function(e){var t=e.currentUser,r=e.id,a=Object(P.a)("/api/comments",(function(e){return y.a.get(e).then((function(e){return e.data.data})).catch((function(e){return console.error(e)}))})),s=a.data;if(a.error)return Object(n.jsx)("p",{children:"An error has occurred."});if(!s)return Object(n.jsx)("p",{children:"Loading..."});var i=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("/api/comments",{params:{id:t}});case 2:Object(P.b)("/api/comments");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.filter((function(e){return e.postID===r})).reverse().map((function(e){return Object(n.jsxs)("div",{className:"rounded-lg border-gray-500 border-2 border-solid px-5 py-4 mb-3 bg-opacity-5 bg-blue-500",children:[Object(n.jsxs)("div",{className:"flex items-center",children:[Object(n.jsx)(v,{className:"bg-green-500 mr-2 w-8 h-8 text-center",children:e.author.slice(0,1).toUpperCase()}),Object(n.jsx)(c.a,{variant:"body1",className:"mr-3",children:e.author}),Object(n.jsx)("p",{className:"text-gray-300",children:S.DateTime.fromISO(e.lastUpdated).toLocaleString(S.DateTime.DATETIME_MED)})]}),Object(n.jsx)("p",{className:"whitespace-pre-wrap",children:e.comment}),t===e.author&&Object(n.jsx)(x.a,{size:"small",variant:"outlined",onClick:function(){return i(e._id)},children:"Delete"})]})}))},T=function(e){var t=e.user,r=Object(E.useRouter)().query.id,a=Object(N.c)({initialValues:{author:t,comment:"",lastUpdated:S.DateTime.now()},onSubmit:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/comments",D(D({},t),{},{postID:r})).then((function(e){return e.data})).catch((function(e){return console.error(e)}));case 2:Object(P.b)("/api/comments");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(n.jsxs)("main",{className:"px-16",children:[Object(n.jsx)(c.a,{variant:"h5",gutterBottom:!0,className:"mb-5",children:"Comments"}),Object(n.jsxs)("form",{onSubmit:a.handleSubmit,className:"flex items-start mb-10",children:[Object(n.jsx)(v,{className:"bg-green-300 mr-5",children:t.slice(0,1).toUpperCase()}),Object(n.jsx)(g.a,{variant:"filled",label:"Comment",name:"comment",onChange:a.handleChange,value:a.values.comment,className:"w-96 mr-3",multiline:!0}),Object(n.jsx)(x.a,{type:"submit",variant:"outlined",children:"Submit"})]}),Object(n.jsx)(k,{currentUser:t,id:r})]})},z=r("Wo11"),C=r("nGE6");function U(e){var t=e.news,r=Object(C.useSession)(),i=Object(a.a)(r,2),o=i[0],u=i[1];return Object(n.jsxs)(z.a,{className:"px-20 mb-32",children:[Object(n.jsxs)("section",{className:"mb-16",children:[Object(n.jsx)(c.a,{variant:"h3",children:t.headline}),Object(n.jsxs)(c.a,{variant:"subtitle1",color:"textSecondary",className:"mb-10",children:["by ",t.author]}),Object(n.jsxs)(c.a,{variant:"body1",className:"whitespace-pre-wrap",children:[t.content," "]})]}),Object(n.jsx)(s.a,{className:"mb-10"}),!u&&o&&Object(n.jsx)("section",{children:Object(n.jsx)(T,{user:o.user.name})})]})}var I=!0;function R(e){var t=e.news;return Object(n.jsx)(U,{news:t})}}},[["29ws",0,2,9,1,3,4,5,6,7]]]);